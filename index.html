<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portuga - Restaurante & Pizzaria</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Restaurant Closed Banner -->
    <div id="restaurant-closed-banner" style="display: none; background: #dc3545; color: white; text-align: center; padding: 12px; position: fixed; top: 0; width: 100%; z-index: 9999; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
        <strong>Restaurante Fechado</strong> - Não estamos aceitando pedidos no momento
    </div>

    <header>
        <div class="container">
            <h1>Portuga</h1>
            <p class="subtitle">Restaurante & Pizzaria</p>
        </div>
    </header>

    <nav>
        <button class="hamburger-menu" id="hamburger-btn" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <ul id="nav-menu">
            <li><a href="index.html">Início</a></li>
            <li><a href="menu.html">Cardápio</a></li>
            <li><a href="carrinho.html">Carrinho <span id="cart-badge" class="cart-badge" style="display: none;">0</span></a></li>
            <li><a href="ouvidoria.html">Fale Conosco</a></li>
            <li><a href="enviar-curriculo.html">Trabalhe Conosco</a></li>
            <li><a href="login.html">Login</a></li>
            <!-- Admin link dynamically shown via auth.js based on permissions -->
        </ul>
    </nav>

    <!-- Announcements/Notes Section -->
    <div id="announcements-container" style="display: none;">
        <!-- Active notes will be dynamically loaded here -->
    </div>

    <main class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h2>Bem-vindo ao Portuga!</h2>
            <p>Sabor português com tradição brasileira. Há mais de 20 anos servindo os melhores pratos da culinária portuguesa e pizzas artesanais.</p>
            <p>Venha nos visitar e experimentar nossas delícias! Agora com pedidos online via WhatsApp.</p>
            <a href="menu.html" class="btn">Ver Cardápio</a>
        </section>

        <section class="menu-section">
            <h2>Nossa História</h2>
            <p style="color: #666; font-size: 1.1rem; line-height: 1.8;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et felis id lectus fringilla ornare. Ut ex justo, vulputate sed placerat quis, facilisis eget tortor. In egestas urna in ex pulvinar pretium. Sed at posuere lorem. Aenean a tincidunt urna, nec imperdiet quam. Curabitur tempor, massa at tincidunt sagittis, dui ex porttitor nunc, vel volutpat tellus lorem in magna. Nam sagittis, ipsum a tincidunt ullamcorper, tellus ex commodo magna, iaculis blandit nisl magna vitae quam.
            </p>
        </section>

        <section class="menu-section">
            <h2>Nossos Destaques</h2>
            <div class="menu-items">
                <div class="menu-item">
                    <h3>Bacalhau à Portuguesa</h3>
                    <p>Tradicional prato preparado com bacalhau autêntico</p>
                </div>
                <div class="menu-item">
                    <h3>Pizzas Artesanais</h3>
                    <p>Massa fresca preparada diariamente com ingredientes selecionados</p>
                </div>
                <div class="menu-item">
                    <h3>Carnes Premium</h3>
                    <p>Cortes nobres grelhados ao ponto perfeito</p>
                </div>
                <div class="menu-item">
                    <h3>Frutos do Mar</h3>
                    <p>Frescos e selecionados, direto do mar para sua mesa</p>
                </div>
            </div>
        </section>

        <section class="menu-section">
            <h2>Entre em Contato</h2>
            <p style="color: #666; font-size: 1.1rem; line-height: 1.8;">
                <strong>Endereço:</strong>Av. Beira Mar, 13050 - Balneário Britânia, Ilha Comprida - SP, 11925-000<br>
                <strong>Telefone:</strong> (13) 3842-1013<br>
                <strong>WhatsApp:</strong> (13) 98137-5008<br>
                <strong>Horários de funcionamento:</strong><br>
                <span id="operating-hours">Carregando horários...</span>
            </p>
        </section>
    </main>

    <!-- Notes Pop-up Modal -->
    <div id="notes-popup" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <span class="modal-close" onclick="closeNotesPopup()">&times;</span>
            <div id="notes-popup-content">
                <!-- Notes will be loaded here -->
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; <span id="current-year"></span> Portuga - Restaurante & Pizzaria</p>
            <p>Sabor português com tradição brasileira</p>
            <div class="footer-propaganda">
                <p>Desenvolvido com ❤️ por <a href="mailto:wiikmy.jb@gmail.com">Seu Dev Web</a></p>
            </div>
        </div>
    </footer>

    <script src="scripts.js"></script>
    <script src="auth.js"></script>
    <script src="scripts/auth-check.js"></script>
    <script>
        // Load and display active notes/announcements
        async function loadActiveNotes() {
            try {
                const response = await fetch('/api/admin/notes.php?action=list');
                const data = await response.json();
                
                if (data.success && data.notes && data.notes.length > 0) {
                    const container = document.getElementById('announcements-container');
                    container.innerHTML = '';
                    
                    data.notes.forEach(note => {
                        const noteEl = document.createElement('div');
                        noteEl.className = `announcement-banner announcement-${note.note_type}`;
                        noteEl.innerHTML = `
                            <div class="announcement-icon"></div>
                            <div class="announcement-content">
                                <h3>${note.title}</h3>
                                <p>${note.content}</p>
                            </div>
                        `;
                        container.appendChild(noteEl);
                    });
                    
                    container.style.display = 'block';
                }
            } catch (error) {
                console.error('Error loading notes:', error);
            }
        }

        // Load operating hours from settings
        async function loadOperatingHours() {
            try {
                const response = await fetch('/api/admin/settings.php?action=all');
                const data = await response.json();
                
                if (data.success && data.data) {
                    const settings = data.data;
                    const hoursContainer = document.getElementById('operating-hours');
                    
                    if (!hoursContainer) return;
                    
                    let hoursHtml = '';
                    
                    // Kitchen hours
                    if (settings.kitchen_hours && settings.kitchen_hours.value) {
                        const kitchenHours = settings.kitchen_hours.value;
                        hoursHtml += 'Cozinha: Todos os dias - ';
                        if (Array.isArray(kitchenHours) && kitchenHours.length > 0) {
                            hoursHtml += kitchenHours.map(h => `${h.start} às ${h.end}`).join(', ');
                        } else {
                            hoursHtml += '11h às 22h'; // Default
                        }
                        hoursHtml += '<br>';
                    }
                    
                    // Pizza hours
                    if (settings.pizza_hours && settings.pizza_hours.value) {
                        const pizzaHours = settings.pizza_hours.value;
                        hoursHtml += 'Pizzaria: Todos os dias - ';
                        if (Array.isArray(pizzaHours) && pizzaHours.length > 0) {
                            hoursHtml += pizzaHours.map(h => `${h.start} às ${h.end}`).join(', ');
                        } else {
                            hoursHtml += '18h às 23h'; // Default
                        }
                        hoursHtml += '<br>';
                    }
                    
                    // Delivery hours
                    if (settings.delivery_hours && settings.delivery_hours.value) {
                        const deliveryHours = settings.delivery_hours.value;
                        hoursHtml += 'Entregas: Todos os dias - ';
                        if (Array.isArray(deliveryHours) && deliveryHours.length > 0) {
                            hoursHtml += deliveryHours.map(h => `${h.start} às ${h.end}`).join(', ');
                        } else {
                            hoursHtml += '11h às 23h'; // Default
                        }
                    }
                    
                    if (hoursHtml) {
                        hoursContainer.innerHTML = hoursHtml;
                    } else {
                        // Fallback to default hours
                        hoursContainer.innerHTML = 'Cozinha: Todos os dias - 11h às 22h<br>Pizzaria: Todos os dias - 18h às 23h<br>Entregas: Todos os dias - 11h às 23h';
                    }
                }
            } catch (error) {
                console.error('Error loading operating hours:', error);
                // Fallback to default hours on error
                const hoursContainer = document.getElementById('operating-hours');
                if (hoursContainer) {
                    hoursContainer.innerHTML = 'Cozinha: Todos os dias - 11h às 22h<br>Pizzaria: Todos os dias - 18h às 23h<br>Entregas: Todos os dias - 11h às 23h';
                }
            }
        }

        // Set current year in footer
        function setCurrentYear() {
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }
        }

        // Update navigation UI on page load
        document.addEventListener('DOMContentLoaded', async () => {
            setCurrentYear();
            await updateNavigationUI();
            await loadActiveNotes();
            await loadOperatingHours();
        });
    </script>
    <style>
        #announcements-container {
            margin: 20px auto;
            max-width: 1200px;
            padding: 0 20px;
        }
        
        .announcement-banner {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            animation: slideDown 0.5s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .announcement-info {
            background: #d1ecf1;
            border-left: 5px solid #0c5460;
        }
        
        .announcement-warning {
            background: #fff3cd;
            border-left: 5px solid #856404;
        }
        
        .announcement-success {
            background: #d4edda;
            border-left: 5px solid #155724;
        }
        
        .announcement-promo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-left: 5px solid #fff;
        }
        
        .announcement-promo .announcement-content h3,
        .announcement-promo .announcement-content p {
            color: white;
        }
        
        .announcement-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .announcement-content {
            flex: 1;
        }
        
        .announcement-content h3 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            color: #333;
        }
        
        .announcement-content p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }
    </style>
</body>
</html>
